<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Менеджер книг</title>
</head>
<body>
    <div class = "uk-container uk-margin-top">
        <h1>Управление библиотекой книг</h1>
        <h2>Добро пожаловать, {{ request.user.username }}</h2>
        <a href="{% url 'logout' %}">Выйти</a>
        <form method="get" class="uk-margin-bottom">
             <div class = "uk-width-1-3@s">
                <label>
                <input class="uk-input" type="text" name="search" placeholder="Поиск..." value="{{search_books}}">
                </label>
            </div>
            <div class = "uk-width-1-3@s">
                <label>Жанры:</label>
                <select class="uk-select" name="genre" >
                     <option value="">Все жанры</option>
                    {% for genre in genres %}
                    <option value="{{ genre.id }}" {% if genre_filter == genre.id %}selected{% endif %}>
                    {{ genre.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class = "uk-width-1-3@s">
                <button class="uk-button uk-button-primary" type="submit">Применить</button>
                {% if search_books or genre_filter %}
                <a href="{% url 'index' %}" class="uk-button uk-button-default">Сброс</a>
                {% endif %}
            </div>
            <div class = "uk-width-1-3@s">
                <a href="create/{{book.id}}">Добавить</a>
            </div>
        </form>

        <table class="uk-table uk-table-striped uk-table-hover">
            <thead>
                <tr>
                    <th>Название</th>
                    <th>Автор</th>
                    <th>Жанр</th>
                    <th>ISBN</th>
                </tr>
            </thead>
            <tbody>
                {% for book in books %}
                <tr>
                    <td>{{book.title}}</td>
                    <td>{{book.author}}</td>
                    <td>{{book.genre}}</td>
                    <td>{{book.isbn}}</td>
                    <td><a href="edit/{{book.id}}">Изменить</a> | <a href="delete/{{book.id}}">Удалить</a></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="uk-text-center">Не найдено</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>